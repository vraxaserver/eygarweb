{"version":3,"sources":["turbopack:///[project]/components/dashboard/hosts/AddPropertyModal.jsx"],"sourcesContent":["// components/AddPropertyModal.js\r\n\"use client\";\r\nimport React, { useState, useCallback, useMemo } from \"react\";\r\nimport {\r\n    Home, Image, MapPin, Settings, FileText, X, Check, Upload, ChevronLeft, ChevronRight\r\n} from \"lucide-react\";\r\n\r\nconst initialFormData = {\r\n    title: \"\", description: \"\", property_type: \"entire_place\", bedrooms: 1, beds: 1, bathrooms: 1, max_guests: 2,\r\n    price_per_night: \"\", cleaning_fee: \"\", instant_book: false,\r\n    location: { address: \"\", city: \"\", state: \"\", country: \"\", postal_code: \"\", latitude: \"\", longitude: \"\" },\r\n    images: [], amenity_ids: [], house_rules: [\"\"], cancellation_policy: \"\", check_in_policy: \"\",\r\n};\r\n\r\nconst steps = [\r\n    { number: 1, title: \"Basic Info\", icon: Home },\r\n    { number: 2, title: \"Location\", icon: MapPin },\r\n    { number: 3, title: \"Images\", icon: Image },\r\n    { number: 4, title: \"Amenities & Rules\", icon: Settings },\r\n    { number: 5, title: \"Policies\", icon: FileText },\r\n];\r\n\r\n// Memoize the Step Content component to prevent re-renders unless props change\r\nconst StepContent = React.memo(({ currentStep, formData, handlers }) => {\r\n    // ... all the switch-case logic from your original `renderStepContent` function\r\n    // For brevity, I'm showing just the structure. Paste your full switch-case here.\r\n     switch (currentStep) {\r\n        case 1:\r\n            return <div>...Your Step 1 Form Fields...</div>;\r\n        case 2:\r\n            return <div>...Your Step 2 Form Fields...</div>;\r\n        case 3:\r\n            return <div>...Your Step 3 Form Fields...</div>;\r\n        case 4:\r\n            return <div>...Your Step 4 Form Fields...</div>;\r\n        case 5:\r\n            return <div>...Your Step 5 Form Fields...</div>;\r\n        default:\r\n            return null;\r\n    }\r\n});\r\nStepContent.displayName = 'StepContent';\r\n\r\n\r\nfunction AddPropertyModal({ show, onClose }) {\r\n    const [currentStep, setCurrentStep] = useState(1);\r\n    const [formData, setFormData] = useState(initialFormData);\r\n\r\n    // Use useCallback for all handler functions to stabilize their identity\r\n    const handleInputChange = useCallback((e) => {\r\n        const { name, value, type, checked } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: type === \"checkbox\" ? checked : value }));\r\n    }, []);\r\n\r\n    const handleLocationChange = useCallback((e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, location: { ...prev.location, [name]: value } }));\r\n    }, []);\r\n    \r\n    // ... other handlers like handleImageUpload, addHouseRule wrapped in useCallback ...\r\n    \r\n    const nextStep = useCallback(() => {\r\n        if (currentStep < 5) setCurrentStep(s => s + 1);\r\n    }, [currentStep]);\r\n\r\n    const prevStep = useCallback(() => {\r\n        if (currentStep > 1) setCurrentStep(s => s - 1);\r\n    }, [currentStep]);\r\n\r\n    const handleSubmit = useCallback(() => {\r\n        console.log(\"Submitting property:\", formData);\r\n        onClose(); // Close the modal\r\n        // Reset state for next time\r\n        setCurrentStep(1);\r\n        setFormData(initialFormData);\r\n    }, [formData, onClose]);\r\n\r\n    // useMemo will prevent re-calculating handlers object on every render\r\n    const handlers = useMemo(() => ({\r\n        handleInputChange,\r\n        handleLocationChange,\r\n        // ... add other handlers here\r\n    }), [handleInputChange, handleLocationChange]);\r\n\r\n    if (!show) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\r\n            <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col\">\r\n                {/* Modal Header */}\r\n                 <div className=\"px-6 py-4 border-b flex justify-between items-center\">\r\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Add New Property</h2>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\r\n                        <X className=\"w-6 h-6\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Progress Steps */}\r\n                <div className=\"px-6 py-4 border-b bg-gray-50\">\r\n                   {/* ... Your Progress Steps UI ... */}\r\n                </div>\r\n                \r\n                {/* Modal Content */}\r\n                <div className=\"flex-1 overflow-y-auto px-6 py-6\">\r\n                    <StepContent currentStep={currentStep} formData={formData} handlers={handlers} />\r\n                </div>\r\n\r\n                {/* Modal Footer */}\r\n                <div className=\"px-6 py-4 border-t bg-gray-50 flex justify-between\">\r\n                     <button onClick={prevStep} disabled={currentStep === 1}>Previous</button>\r\n                     {currentStep < 5 ? (\r\n                        <button onClick={nextStep}>Next</button>\r\n                     ) : (\r\n                        <button onClick={handleSubmit}>Submit Property</button>\r\n                     )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n// Wrap the export in React.memo to prevent re-renders when parent's state changes\r\nexport default React.memo(AddPropertyModal);"],"names":[],"mappings":"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"}